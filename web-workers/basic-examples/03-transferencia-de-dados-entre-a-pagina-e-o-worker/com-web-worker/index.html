<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transferência de dados entre a página e o Worker</title>
  <link rel="stylesheet" href="https://getbootstrap.com/docs/3.4/dist/css/bootstrap.min.css">
</head>

<body>
  <div>
    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>

    <section>
      <h2>Section</h2>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur est facere, magni natus minima iure nam excepturi aliquam animi harum assumenda porro officiis necessitatibus quibusdam laborum, exercitationem incidunt placeat molestias inventore fugit numquam nemo consectetur minus quaerat. Facere natus blanditiis voluptatum ut nemo id illo dolores, culpa doloribus vero suscipit quas dignissimos cum vitae velit fuga consectetur, aperiam est excepturi ea ipsum sit! Doloribus repellendus alias suscipit recusandae, atque inventore tempore accusantium laborum labore beatae eius dolore deleniti dolores. Libero voluptates magni autem omnis. Eligendi sit soluta voluptate corrupti voluptates deleniti debitis, autem dolor veniam saepe, itaque dolorum magnam consequatur.</p>
    </section>
  </div>

  <div data-js="loading">Loading...</div>

  <table class="table">
    <thead></thead>
    <tbody></tbody>
  </table>

  <script>
    const loading = document.querySelector('[data-js="loading"]')

    const length = 150000
    const json = Array.from({ length }, (_, index) => {
      const id = index + 1

      return {
        id,
        type: 'CreateEvent',
        actor: `User ${id}`,
        repo: `repo/${id}`,
        public: true,
        created_at: new Date().toJSON()
      }
    })

    // Inicie o Web Worker
    const worker = new Worker('./worker.js');

    // Seu JSON (para simplificar, estou usando um objeto pequeno)
    const jsonData = JSON.stringify(json);

    // Convertendo a string JSON para ArrayBuffer
    const buffer = new TextEncoder().encode(jsonData).buffer;

    // Enviando o ArrayBuffer para o Web Worker
    worker.postMessage(buffer, [buffer]);

    // Recebendo os dados processados do Web Worker
    worker.onmessage = function(event) {
      const receivedBuffer = event.data;
      const receivedJson = new TextDecoder().decode(receivedBuffer);
      const processedData = JSON.parse(receivedJson);

      // Renderize os dados processados em sua tabela
      renderTable(processedData);

      loading.style.display = 'none'
    };

    function renderTable({ theadColumns, tbodyRows }) {
      const thead = document.querySelector('thead')
      const tbody = document.querySelector('tbody')

      thead.innerHTML = theadColumns
      tbody.innerHTML = tbodyRows
    }

    console.log('next code block...')
  </script>
</body>
</html>